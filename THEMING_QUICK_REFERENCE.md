# Theming Quick Reference Guide

## ğŸ¨ Color Palettes at a Glance

### Visual Palette Comparison

```
GREEN (Default)
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20 (empty)
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #9be9a8 (light)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #40c463 (medium)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #30a14e (dark)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #216e39 (darkest)

HALLOWEEN
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #FFEE4A (yellow)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #FFC501 (orange-yellow)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #FE9600 (orange)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #03001C (dark)

TEAL
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #7ee5e5 (light)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #2dc5c5 (medium)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #0d9e9e (dark)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #0e6d6d (darkest)

BLUE
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #79b8ff (light)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #388bfd (medium)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #1f6feb (dark)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #0d419d (darkest)

PINK
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #f0b5d2 (light)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #d961a0 (medium)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #bf4b8a (dark)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #99286e (darkest)

PURPLE
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #cdb4ff (light)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #a371f7 (medium)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #8957e5 (dark)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #6e40c9 (darkest)

ORANGE
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #ffd699 (light)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #ffb347 (medium)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #ff8c00 (dark)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #cc5500 (darkest)

MONOCHROME
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #9e9e9e (light)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #757575 (medium)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #424242 (dark)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #212121 (darkest)

YlGnBu (Yellow-Green-Blue)
â”œâ”€ grade0: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ #1F1F20
â”œâ”€ grade1: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #a1dab4 (light)
â”œâ”€ grade2: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #41b6c4 (cyan)
â”œâ”€ grade3: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #2c7fb8 (blue)
â””â”€ grade4: â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ #253494 (dark)
```

---

## ğŸ”§ Key Data Structures

### GraphColorPalette Interface
```typescript
interface GraphColorPalette {
  name: string;           // Display name
  grade0: string;         // Empty/no activity
  grade1: string;         // Lightest activity
  grade2: string;         // Light activity
  grade3: string;         // Medium activity
  grade4: string;         // Darkest/most intense
}
```

### Intensity Levels
```
0 = No activity (grade0)
1 = Low activity (grade1)
2 = Medium activity (grade2)
3 = High activity (grade3)
4 = Very high activity (grade4)
```

---

## ğŸ¯ Provider/Source Colors

### TUI Provider Detection
```
Model Name Pattern â†’ Provider â†’ Color
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
claude, sonnet, opus, haiku â†’ Anthropic â†’ #FF6B35
gpt, o1, o3, codex â†’ OpenAI â†’ #10B981
gemini â†’ Google â†’ #3B82F6
deepseek â†’ DeepSeek â†’ #06B6D4
grok â†’ XAI â†’ #EAB308
llama, mixtral â†’ Meta â†’ #6366F1
cursor, auto â†’ Cursor â†’ #8B5CF6
(default) â†’ Unknown â†’ #FFFFFF
```

### Frontend Source Colors
```
opencode â†’ #22c55e (Green)
claude â†’ #f97316 (Orange)
codex â†’ #3b82f6 (Blue)
gemini â†’ #8b5cf6 (Purple)
cursor â†’ #000000 (Black)
```

---

## ğŸ“ File Locations

### Frontend
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ themes.ts              â† Color palettes
â”‚   â”‚   â”œâ”€â”€ useSettings.ts         â† Theme preferences
â”‚   â”‚   â””â”€â”€ constants.ts           â† Source colors
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ globals.css            â† CSS variables
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ ThemeToggle.tsx        â† Theme switcher
â”‚       â”œâ”€â”€ GraphControls.tsx      â† Palette selector
â”‚       â”œâ”€â”€ TokenGraph2D.tsx       â† Graph rendering
â”‚       â”œâ”€â”€ BreakdownPanel.tsx     â† Per-model colors
â”‚       â””â”€â”€ StatsPanel.tsx         â† Stats display
```

### TUI
```
packages/cli/src/tui/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ themes.ts                  â† Color palettes
â”‚   â””â”€â”€ settings.ts                â† Settings persistence
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ colors.ts                  â† Provider colors
â”œâ”€â”€ App.tsx                        â† Palette switching
â””â”€â”€ components/
    â”œâ”€â”€ StatsView.tsx              â† Contribution grid
    â””â”€â”€ Footer.tsx                 â† Palette display
```

---

## âŒ¨ï¸ Keyboard Shortcuts

### TUI Theme Control
```
P     â†’ Cycle to next palette
      â†’ Saves to ~/.config/token-tracker/tui-settings.json
```

### Frontend Theme Control
```
Dropdown selector in GraphControls
Light/Dark/System toggle in ThemeToggle
```

---

## ğŸ’¾ Settings Persistence

### Frontend
```
Storage: localStorage
Key: "token-tracker-settings"
Format: {
  theme: "light" | "dark" | "system",
  paletteName: ColorPaletteName
}
```

### TUI
```
Storage: File system
Path: ~/.config/token-tracker/tui-settings.json
Format: {
  colorPalette: string
}
```

---

## ğŸ¨ Usage Examples

### Frontend - Using a Palette
```typescript
import { getPalette, getGradeColor } from "@/lib/themes";

const palette = getPalette("green");
const color = getGradeColor(palette, 3);  // #30a14e
```

### TUI - Using a Palette
```typescript
import { getPalette, getGradeColor } from "../config/themes.js";

const palette = getPalette("blue");
const color = getGradeColor(palette, 2);  // #388bfd
```

### TUI - Using Provider Colors
```typescript
import { getModelColor, getProviderFromModel } from "../utils/colors.js";

const color = getModelColor("claude-3-sonnet");  // #FF6B35
const provider = getProviderFromModel("gpt-4");  // "openai"
```

---

## ğŸ”„ Intensity Calculation

### Formula
```
intensity = Math.min(4, Math.ceil((cost / maxCost) * 4))
```

### Example
```
If maxCost = $100:
  $0-25   â†’ intensity 1 (grade1)
  $25-50  â†’ intensity 2 (grade2)
  $50-75  â†’ intensity 3 (grade3)
  $75-100 â†’ intensity 4 (grade4)
```

---

## ğŸ¯ Design Principles

1. **Consistency**: Same palettes across frontend and TUI
2. **Accessibility**: Sufficient contrast ratios
3. **Flexibility**: 9 different palettes for user preference
4. **Simplicity**: 5-grade intensity system
5. **Persistence**: User preferences saved locally

---

## ğŸ“Š Contribution Graph Specs

### Frontend (Canvas)
```
Grid: 7 days Ã— 53 weeks
Cell size: 10Ã—10 px
Margin: 2 px
Rendering: Canvas 2D
```

### TUI (Text)
```
Grid: 7 days Ã— 52 weeks
Cell: Unicode block character (â–ˆ)
Empty: Dot character (Â·)
Rendering: Text-based
```

---

## ğŸš€ Quick Start

### To Change Palette in TUI
```bash
# Press 'P' while running the TUI
# Cycles through: green â†’ halloween â†’ teal â†’ blue â†’ pink â†’ purple â†’ orange â†’ monochrome â†’ YlGnBu â†’ green
```

### To Change Palette in Frontend
```
1. Click the palette dropdown in GraphControls
2. Select desired palette
3. Preference saved to localStorage
```

### To Add New Palette
```typescript
// In themes.ts
export const colorPalettes: Record<ColorPaletteName, GraphColorPalette> = {
  // ... existing palettes
  newPalette: {
    name: "New Palette",
    grade0: "#1F1F20",
    grade1: "#...",
    grade2: "#...",
    grade3: "#...",
    grade4: "#...",
  },
};
```

---

## ğŸ” Debugging Tips

### Check Current Palette (TUI)
```
Look at footer: "p theme (Green)" shows current palette
```

### Check Saved Settings (TUI)
```bash
cat ~/.config/token-tracker/tui-settings.json
```

### Check Saved Settings (Frontend)
```javascript
// In browser console
localStorage.getItem("token-tracker-settings")
```

---

## ğŸ“ Notes

- All palettes use the same empty color: `#1F1F20`
- Intensity is calculated from cost, not tokens
- Provider detection is case-insensitive
- Terminal true color (24-bit) required for full palette support
- Frontend uses CSS variables for additional theming

